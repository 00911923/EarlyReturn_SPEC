# Bean Validation 測試指令集
# 請先確認應用已啟動在 http://localhost:8080
# 然後依序執行以下 curl 指令

# ========================================
# 測試 1: 成功註冊使用者
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"張三\",\"email\":\"zhangsan@example.com\",\"age\":25,\"password\":\"securePassword123\"}"

# 預期：返回 201，包含用戶資料


# ========================================
# 測試 2: Email 格式錯誤
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"李四\",\"email\":\"invalid-email\",\"age\":30,\"password\":\"password123\"}"

# 預期：返回 400，錯誤訊息 "Email 格式不正確"


# ========================================
# 測試 3: 年齡未滿 18 歲
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"王五\",\"email\":\"wangwu@example.com\",\"age\":16,\"password\":\"password123\"}"

# 預期：返回 400，錯誤訊息 "年齡必須大於等於 18 歲"


# ========================================
# 測試 4: 姓名太短（少於 2 個字元）
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"王\",\"email\":\"wang@example.com\",\"age\":25,\"password\":\"password123\"}"

# 預期：返回 400，錯誤訊息 "姓名長度必須在 2-50 字元之間"


# ========================================
# 測試 5: 密碼太短（少於 8 個字元）
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"趙六\",\"email\":\"zhaoliu@example.com\",\"age\":25,\"password\":\"123\"}"

# 預期：返回 400，錯誤訊息 "密碼長度必須至少 8 個字元"


# ========================================
# 測試 6: Email 重複（自定義驗證器）
# ========================================
# 第一次註冊（應該成功）
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"孫七\",\"email\":\"sunqi@example.com\",\"age\":25,\"password\":\"password123\"}"

# 第二次用相同 Email（應該失敗）
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"周八\",\"email\":\"sunqi@example.com\",\"age\":28,\"password\":\"password456\"}"

# 預期：第二次返回 400，錯誤訊息 "Email 已被註冊"


# ========================================
# 測試 7: 多個欄位同時驗證失敗
# ========================================
curl -X POST http://localhost:8080/api/users/register -H "Content-Type: application/json" -d "{\"name\":\"吳\",\"email\":\"invalid\",\"age\":15,\"password\":\"123\"}"

# 預期：返回 400，包含多個錯誤：
# - name: "姓名長度必須在 2-50 字元之間"
# - email: "Email 格式不正確"
# - age: "年齡必須大於等於 18 歲"
# - password: "密碼長度必須至少 8 個字元"
